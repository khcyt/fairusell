const kh_global=Function("return globalThis;")()||Function("return this;")()||Function("return self;")();const as_module=undefined==this;const asWorker="undefined"===typeof window&&"undefined"===typeof process&&self;const cf="kh_server";const mf="common_dirname_esm";kh_global.kh??={};kh_global.kh.context??="undefined"!==typeof window?kh_global.parent==kh_global?"window":"iframe":"undefined"!==typeof process?"node.js":"undefined"!==typeof self?self.name??"worker":"unknown";kh_global.kh.storage??={};const cs=kh_global.kh.storage[cf]??={cf,ms:new Set};const ms=kh_global.kh.storage[mf]??={mf,cs};cs.ms.add(ms);let jsm_prefix;if("undefined"!==typeof process){jsm_prefix=``}else{jsm_prefix=`/contrib/jsm`;console.assert(0,`${mf} is only for node.js`)}export function dirname(__dirname=import.meta.url){if(0==__dirname?.indexOf("file://"))__dirname=__dirname.substring("file://".length);if("/"==__dirname?.at(0)&&process.platform.startsWith("win"))__dirname=__dirname.substring(1);return __dirname?.substring(0,__dirname.lastIndexOf("/"))}kh_global.LoadedScripts?.get(mf).resolve(ms);